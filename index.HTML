<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–µ–π—Å—ã - –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–æ–≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff0080, #ff8c00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 30px rgba(255, 0, 128, 0.3);
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .balance, .inventory-count {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 15px 30px;
            display: inline-block;
            border: 2px solid #00ffcc;
            box-shadow: 0 0 20px rgba(0, 255, 204, 0.2);
        }

        .balance span, .inventory-count span {
            color: #00ffcc;
            font-weight: bold;
            font-size: 1.5rem;
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tab-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }

        .tab-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: linear-gradient(45deg, #ff0080, #ff8c00);
            box-shadow: 0 5px 20px rgba(255, 0, 128, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .cases-section {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .case {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .case:hover {
            transform: translateY(-10px);
            border-color: #ff0080;
            box-shadow: 0 10px 30px rgba(255, 0, 128, 0.3);
        }

        .case-image {
            width: 150px;
            height: 150px;
            margin: 0 auto 15px;
            background: linear-gradient(45deg, #00ffcc, #ff0080);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }

        .case-name {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #fff;
        }

        .case-price {
            color: #00ffcc;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .open-btn {
            background: linear-gradient(45deg, #ff0080, #ff8c00);
            border: none;
            color: white;
            padding: 10px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .open-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 0, 128, 0.4);
        }

        .inventory-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .inventory-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }

        .inventory-item:hover {
            transform: translateY(-5px);
            border-color: #00ffcc;
            box-shadow: 0 5px 20px rgba(0, 255, 204, 0.3);
        }

        .item-emoji {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .item-rarity {
            font-size: 0.9rem;
            padding: 5px 15px;
            border-radius: 15px;
            display: inline-block;
            margin: 10px 0;
        }

        .common { background: #4a4a4a; }
        .rare { background: #1e6fff; }
        .epic { background: #9d00ff; }
        .legendary { background: #ffaa00; color: #000; }

        .sell-btn {
            background: linear-gradient(45deg, #ff0000, #ff5500);
            border: none;
            color: white;
            padding: 8px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin-top: 10px;
            width: 100%;
        }

        .sell-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
        }

        .sell-price {
            color: #ffaa00;
            font-size: 1rem;
            margin-top: 5px;
        }

        .empty-inventory {
            text-align: center;
            padding: 40px;
            color: #aaa;
            font-size: 1.2rem;
        }

        .open-section {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            display: none;
            margin-top: 30px;
            border: 2px solid #00ffcc;
        }

        .case-display {
            width: 300px;
            height: 300px;
            margin: 30px auto;
            background: linear-gradient(135deg, #0f3460, #1a1a2e);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            border: 5px solid #ff0080;
            box-shadow: 0 0 50px rgba(255, 0, 128, 0.5);
            transition: transform 0.5s ease;
        }

        .item-name {
            font-size: 2rem;
            margin: 20px 0;
            color: #00ffcc;
            min-height: 60px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .action-btn {
            padding: 15px 35px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .open-again {
            background: linear-gradient(45deg, #00ffcc, #0088ff);
            color: #000;
        }

        .close {
            background: linear-gradient(45deg, #ff0000, #ff8800);
            color: white;
        }

        .action-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .history {
            margin-top: 50px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
        }

        .history h3 {
            margin-bottom: 15px;
            color: #00ffcc;
        }

        .history-items {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 10px;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 10px;
            min-width: 150px;
            text-align: center;
        }

        .rarity-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }

        .common-dot { background: #4a4a4a; }
        .rare-dot { background: #1e6fff; }
        .epic-dot { background: #9d00ff; }
        .legendary-dot { background: #ffaa00; }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes win {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .spinning {
            animation: spin 0.1s linear infinite;
        }

        .winning {
            animation: win 0.5s ease 3;
        }

        .new-item {
            animation: fadeIn 0.5s ease;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #00ffcc, #0088ff);
            color: #000;
            padding: 15px 25px;
            border-radius: 10px;
            font-weight: bold;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 255, 204, 0.3);
        }

        .legendary-notification {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #ffaa00, #ff5500);
            color: white;
            padding: 20px 40px;
            border-radius: 15px;
            font-size: 1.5rem;
            font-weight: bold;
            z-index: 1000;
            animation: win 0.5s ease 3;
            box-shadow: 0 0 30px rgba(255, 170, 0, 0.5);
            text-align: center;
        }

        @media (max-width: 768px) {
            .cases-section, .inventory-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .case-display {
                width: 250px;
                height: 250px;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .stats {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üíé –ú–ê–ì–ê–ó–ò–ù –ö–ï–ô–°–û–í üíé</h1>
            <div class="stats">
                <div class="balance">
                    –ë–∞–ª–∞–Ω—Å: <span id="balance">5000</span> ‚ÇΩ
                </div>
                <div class="inventory-count">
                    –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: <span id="inventoryCount">0</span> –ø—Ä–µ–¥–º–µ—Ç–æ–≤
                </div>
            </div>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('cases')">–ö–µ–π—Å—ã</button>
            <button class="tab-btn" onclick="switchTab('inventory')">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
        </div>

        <section class="tab-content active" id="casesTab">
            <div class="cases-section" id="casesSection">
                <!-- –ö–µ–π—Å—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </section>

        <section class="tab-content" id="inventoryTab">
            <div class="inventory-section">
                <h2>–í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
                <div class="inventory-grid" id="inventoryGrid">
                    <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                </div>
                <div class="empty-inventory" id="emptyInventory" style="display: none;">
                    –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–µ–π—Å—ã, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã!
                </div>
            </div>
        </section>

        <section class="open-section" id="openSection">
            <h2>–û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–∞</h2>
            <div class="case-display" id="caseDisplay">
                ‚ùì
            </div>
            <div class="item-name" id="itemName">–ù–∞–∂–º–∏—Ç–µ "–û—Ç–∫—Ä—ã—Ç—å" –¥–ª—è –Ω–∞—á–∞–ª–∞</div>
            <div class="item-rarity common" id="itemRarity">–û–±—ã—á–Ω—ã–π</div>
            <div class="controls">
                <button class="action-btn open-again" id="openAgainBtn">–û—Ç–∫—Ä—ã—Ç—å –µ—â–µ</button>
                <button class="action-btn close" id="closeBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </section>

        <section class="history">
            <h3>–ò—Å—Ç–æ—Ä–∏—è –æ—Ç–∫—Ä—ã—Ç–∏–π</h3>
            <div class="history-items" id="historyItems">
                <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </section>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ –∫–µ–π—Å–æ–≤
        const cases = [
            {
                id: 1,
                name: "–û–±—ã—á–Ω—ã–π –∫–µ–π—Å",
                price: 500,
                color: "#4a4a4a",
                items: [
                    { name: "–ù–æ–∂", rarity: "common", emoji: "üî™", chance: 40 },
                    { name: "–ü–∏—Å—Ç–æ–ª–µ—Ç", rarity: "common", emoji: "üî´", chance: 30 },
                    { name: "–ë—Ä–æ–Ω—è", rarity: "common", emoji: "üõ°Ô∏è", chance: 20 },
                    { name: "–®–ª–µ–º", rarity: "common", emoji: "‚õëÔ∏è", chance: 10 }
                ]
            },
            {
                id: 2,
                name: "–†–µ–¥–∫–∏–π –∫–µ–π—Å",
                price: 1000,
                color: "#1e6fff",
                items: [
                    { name: "–ú–µ—á", rarity: "rare", emoji: "‚öîÔ∏è", chance: 50 },
                    { name: "–õ—É–∫", rarity: "rare", emoji: "üèπ", chance: 30 },
                    { name: "–©–∏—Ç", rarity: "rare", emoji: "üõ°Ô∏è", chance: 15 },
                    { name: "–ê—Ä—Ç–µ—Ñ–∞–∫—Ç", rarity: "epic", emoji: "üíé", chance: 5 }
                ]
            },
            {
                id: 3,
                name: "–≠–ø–∏—á–µ—Å–∫–∏–π –∫–µ–π—Å",
                price: 2500,
                color: "#9d00ff",
                items: [
                    { name: "–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∂–µ–∑–ª", rarity: "epic", emoji: "ü™Ñ", chance: 60 },
                    { name: "–ö–æ–ª—å—Ü–æ —Å–∏–ª—ã", rarity: "epic", emoji: "üíç", chance: 25 },
                    { name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –º–µ—á", rarity: "legendary", emoji: "üó°Ô∏è", chance: 10 },
                    { name: "–ö–æ—Ä–æ–Ω–∞", rarity: "legendary", emoji: "üëë", chance: 5 }
                ]
            },
            {
                id: 4,
                name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∫–µ–π—Å",
                price: 5000,
                color: "#ffaa00",
                items: [
                    { name: "–î—Ä–∞–∫–æ–Ω—å–µ —è–π—Ü–æ", rarity: "legendary", emoji: "ü•ö", chance: 40 },
                    { name: "–ö—Ä—ã–ª—å—è –∞–Ω–≥–µ–ª–∞", rarity: "legendary", emoji: "üëº", chance: 30 },
                    { name: "–°—Ñ–µ—Ä–∞ –≤—Å–µ–≤–ª–∞—Å—Ç–∏—è", rarity: "legendary", emoji: "üîÆ", chance: 20 },
                    { name: "–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç", rarity: "legendary", emoji: "üåü", chance: 10 }
                ]
            }
        ];

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let balance = 5000;
        let currentCase = null;
        let history = [];
        let inventory = [];
        let isOpening = false;

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ localStorage
        function loadFromStorage() {
            if (localStorage.getItem('caseHistory')) {
                history = JSON.parse(localStorage.getItem('caseHistory'));
                updateHistory();
            }
            if (localStorage.getItem('caseInventory')) {
                inventory = JSON.parse(localStorage.getItem('caseInventory'));
                updateInventory();
            }
            if (localStorage.getItem('caseBalance')) {
                balance = parseInt(localStorage.getItem('caseBalance'));
                updateBalance();
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ localStorage
        function saveToStorage() {
            localStorage.setItem('caseHistory', JSON.stringify(history));
            localStorage.setItem('caseInventory', JSON.stringify(inventory));
            localStorage.setItem('caseBalance', balance.toString());
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
        function switchTab(tabName) {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–Ω—Ç–æ–≤
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç—É
            document.querySelector(`.tab-btn[onclick="switchTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}Tab`).classList.add('active');
            
            if (tabName === 'inventory') {
                updateInventory();
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–µ–π—Å–æ–≤
        function initCases() {
            const casesSection = document.getElementById('casesSection');
            casesSection.innerHTML = '';
            
            cases.forEach(caseItem => {
                const caseElement = document.createElement('div');
                caseElement.className = 'case';
                caseElement.innerHTML = `
                    <div class="case-image" style="background: linear-gradient(45deg, ${caseItem.color}, #ffffff)">
                        ${caseItem.items[0].emoji}
                    </div>
                    <div class="case-name">${caseItem.name}</div>
                    <div class="case-price">${caseItem.price} ‚ÇΩ</div>
                    <button class="open-btn" onclick="openCase(${caseItem.id})">
                        –û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å
                    </button>
                `;
                casesSection.appendChild(caseElement);
            });
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–µ–π—Å–∞
        function openCase(caseId) {
            if (isOpening) return;
            
            const selectedCase = cases.find(c => c.id === caseId);
            if (!selectedCase) return;
            
            if (balance < selectedCase.price) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!');
                return;
            }
            
            // –°–ø–∏—Å—ã–≤–∞–µ–º –¥–µ–Ω—å–≥–∏
            balance -= selectedCase.price;
            updateBalance();
            saveToStorage();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é –æ—Ç–∫—Ä—ã—Ç–∏—è
            currentCase = selectedCase;
            document.getElementById('openSection').style.display = 'block';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ "–û—Ç–∫—Ä—ã—Ç—å –µ—â–µ"
            document.getElementById('openAgainBtn').textContent = `–û—Ç–∫—Ä—ã—Ç—å –µ—â–µ (${selectedCase.price} ‚ÇΩ)`;
            
            // –ù–∞—á–∏–Ω–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –æ—Ç–∫—Ä—ã—Ç–∏—è
            startOpeningAnimation();
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è
        function startOpeningAnimation() {
            isOpening = true;
            const display = document.getElementById('caseDisplay');
            const nameDisplay = document.getElementById('itemName');
            const rarityDisplay = document.getElementById('itemRarity');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –≤—Ä–∞—â–µ–Ω–∏—è
            display.classList.add('spinning');
            nameDisplay.textContent = '–û—Ç–∫—Ä—ã–≤–∞–µ–º...';
            rarityDisplay.textContent = '...';
            rarityDisplay.className = 'item-rarity';
            
            // –°–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–∞ —Å —É—á–µ—Ç–æ–º —à–∞–Ω—Å–æ–≤
            setTimeout(() => {
                const item = getRandomItem(currentCase.items);
                
                // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
                display.classList.remove('spinning');
                display.classList.add('winning');
                display.textContent = item.emoji;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                nameDisplay.textContent = item.name;
                rarityDisplay.textContent = getRarityText(item.rarity);
                rarityDisplay.classList.add(item.rarity);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
                addToHistory(item);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                addToInventory(item);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
                if (item.rarity === 'legendary') {
                    showLegendaryNotification('üéâ –õ–ï–ì–ï–ù–î–ê–†–ù–´–ô –ü–†–ï–î–ú–ï–¢! üéâ');
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
                saveToStorage();
                
                isOpening = false;
                
                // –£–±–∏—Ä–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ–±–µ–¥—ã
                setTimeout(() => {
                    display.classList.remove('winning');
                }, 1500);
                
            }, 2000);
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ —Å —É—á–µ—Ç–æ–º —à–∞–Ω—Å–æ–≤
        function getRandomItem(items) {
            const totalChance = items.reduce((sum, item) => sum + item.chance, 0);
            let random = Math.random() * totalChance;
            
            for (const item of items) {
                if (random < item.chance) {
                    return item;
                }
                random -= item.chance;
            }
            
            return items[items.length - 1];
        }

        // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Ä–µ–¥–∫–æ—Å—Ç–∏
        function getRarityText(rarity) {
            const rarityMap = {
                'common': '–û–±—ã—á–Ω—ã–π',
                'rare': '–†–µ–¥–∫–∏–π',
                'epic': '–≠–ø–∏—á–µ—Å–∫–∏–π',
                'legendary': '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π'
            };
            return rarityMap[rarity] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
        function addToHistory(item) {
            const historyItem = {
                name: item.name,
                rarity: item.rarity,
                emoji: item.emoji,
                caseName: currentCase.name,
                timestamp: new Date().toLocaleTimeString()
            };
            
            history.unshift(historyItem);
            if (history.length > 10) history.pop();
            
            updateHistory();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
        function updateHistory() {
            const historyContainer = document.getElementById('historyItems');
            historyContainer.innerHTML = '';
            
            history.forEach(item => {
                const historyElement = document.createElement('div');
                historyElement.className = 'history-item';
                historyElement.innerHTML = `
                    <div>${item.emoji} ${item.name}</div>
                    <div style="font-size: 0.8rem; margin-top: 5px;">
                        <span class="rarity-dot ${item.rarity}-dot"></span>
                        ${getRarityText(item.rarity)}
                    </div>
                    <div style="font-size: 0.7rem; margin-top: 5px; color: #aaa;">
                        ${item.caseName}
                    </div>
                    <div style="font-size: 0.7rem; color: #888;">
                        ${item.timestamp}
                    </div>
                `;
                historyContainer.appendChild(historyElement);
            });
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
        function addToInventory(item) {
            const inventoryItem = {
                id: Date.now(),
                name: item.name,
                rarity: item.rarity,
                emoji: item.emoji,
                caseName: currentCase.name,
                casePrice: currentCase.price,
                timestamp: new Date().toLocaleString()
            };
            
            inventory.unshift(inventoryItem);
            updateInventory();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showNotification(`–ü–æ–ª—É—á–µ–Ω –Ω–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç: ${item.emoji} ${item.name}`);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
        function updateInventory() {
            const inventoryGrid = document.getElementById('inventoryGrid');
            const emptyInventory = document.getElementById('emptyInventory');
            const inventoryCount = document.getElementById('inventoryCount');
            
            inventoryCount.textContent = inventory.length;
            
            if (inventory.length === 0) {
                inventoryGrid.style.display = 'none';
                emptyInventory.style.display = 'block';
                return;
            }
            
            inventoryGrid.style.display = 'grid';
            emptyInventory.style.display = 'none';
            inventoryGrid.innerHTML = '';
            
            inventory.forEach((item, index) => {
                const sellPrice = Math.floor(item.casePrice / 2);
                
                const itemElement = document.createElement('div');
                itemElement.className = 'inventory-item new-item';
                itemElement.innerHTML = `
                    <div class="item-emoji">${item.emoji}</div>
                    <div class="item-name">${item.name}</div>
                    <div class="item-rarity ${item.rarity}">${getRarityText(item.rarity)}</div>
                    <div style="font-size: 0.8rem; color: #aaa; margin: 5px 0;">
                        –ò–∑: ${item.caseName}
                    </div>
                    <div class="sell-price">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏: ${sellPrice} ‚ÇΩ</div>
                    <button class="sell-btn" onclick="sellItem(${index})">
                        –ü—Ä–æ–¥–∞—Ç—å
                    </button>
                `;
                inventoryGrid.appendChild(itemElement);
            });
        }

        // –ü—Ä–æ–¥–∞–∂–∞ –ø—Ä–µ–¥–º–µ—Ç–∞
        function sellItem(index) {
            if (index >= 0 && index < inventory.length) {
                const item = inventory[index];
                const sellPrice = Math.floor(item.casePrice / 2);
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –±–∞–ª–∞–Ω—Å
                balance += sellPrice;
                updateBalance();
                
                // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥–º–µ—Ç –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
                inventory.splice(index, 1);
                updateInventory();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification(`–ü—Ä–µ–¥–º–µ—Ç –ø—Ä–æ–¥–∞–Ω –∑–∞ ${sellPrice} ‚ÇΩ`);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
                saveToStorage();
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
        function showLegendaryNotification(message) {
            const notificationDiv = document.createElement('div');
            notificationDiv.className = 'legendary-notification';
            notificationDiv.textContent = message;
            document.body.appendChild(notificationDiv);
            
            setTimeout(() => {
                notificationDiv.style.opacity = '0';
                notificationDiv.style.transform = 'translateX(-50%) translateY(-100px)';
                setTimeout(() => {
                    document.body.removeChild(notificationDiv);
                }, 500);
            }, 3000);
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100px)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
        function updateBalance() {
            document.getElementById('balance').textContent = balance;
        }

        // –ó–∞–∫—Ä—ã—Ç—å —Å–µ–∫—Ü–∏—é –æ—Ç–∫—Ä—ã—Ç–∏—è
        document.getElementById('closeBtn').onclick = function() {
            document.getElementById('openSection').style.display = 'none';
        };

        // –û—Ç–∫—Ä—ã—Ç—å –µ—â–µ —Ä–∞–∑
        document.getElementById('openAgainBtn').onclick = function() {
            if (currentCase && balance >= currentCase.price && !isOpening) {
                openCase(currentCase.id);
            } else if (balance < currentCase.price) {
                showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤!');
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            initCases();
            loadFromStorage();
            updateBalance();
        };
    </script>
</body>
</html>